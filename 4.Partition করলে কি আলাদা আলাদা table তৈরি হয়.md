‡¶è‡¶ï‡¶¶‡¶Æ!
**Partition ‡¶ï‡¶∞‡¶≤‡ßá ‡¶Ü‡¶≤‡¶æ‡¶¶‡¶æ ‡¶Ü‡¶≤‡¶æ‡¶¶‡¶æ ‡¶ü‡ßá‡¶¨‡¶ø‡¶≤‡¶á ‡¶§‡ßà‡¶∞‡¶ø ‡¶π‡ßü ‚Äî ‡¶ï‡¶ø‡¶®‡ßç‡¶§‡ßÅ ‡¶∏‡¶¨‡¶ó‡ßÅ‡¶≤‡ßã ‡¶Æ‡¶ø‡¶≤‡ßá‡¶á ‡¶è‡¶ï‡¶ü‡¶ø ‡¶¨‡ßú ‡¶ü‡ßá‡¶¨‡¶ø‡¶≤‡ßá‡¶∞ ‡¶Æ‡¶§‡ßã ‡¶ï‡¶æ‡¶ú ‡¶ï‡¶∞‡ßá‡•§**

‡¶è‡¶ü‡¶æ‡¶á Partition-‡¶è‡¶∞ ‡¶Ü‡¶∏‡¶≤ ‡¶ú‡¶æ‡¶¶‡ßÅ! üéØ

---

# ‚úÖ **Partition ‡¶ï‡¶∞‡¶≤‡ßá ‡¶ï‡¶ø ‡¶Ü‡¶≤‡¶æ‡¶¶‡¶æ ‡¶Ü‡¶≤‡¶æ‡¶¶‡¶æ table ‡¶§‡ßà‡¶∞‡¶ø ‡¶π‡ßü?**

### ‚úî ‡¶π‡ßç‡¶Ø‡¶æ‡¶Å, PostgreSQL ‡¶è partitioning ‡¶ï‡¶∞‡¶≤‡ßá ‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶ü‡¶ø partition = **‡¶è‡¶ï‡¶ü‡¶ø ‡¶Ü‡¶≤‡¶æ‡¶¶‡¶æ physical table**

‡¶â‡¶¶‡¶æ‡¶π‡¶∞‡¶£:

### Main master table:

```
users
```

### Monthly partitions:

```
users_2025_01
users_2025_02
users_2025_03
...
```

‡¶è‡¶ó‡ßÅ‡¶≤‡ßã ‡¶Ü‡¶≤‡¶æ‡¶¶‡¶æ ‡¶ü‡ßá‡¶¨‡¶ø‡¶≤, ‡¶ï‡¶ø‡¶®‡ßç‡¶§‡ßÅ PostgreSQL ‡¶è‡¶ó‡ßÅ‡¶≤‡ßã‡¶ï‡ßá **‡¶è‡¶ï‡¶ü‡¶ø ‡¶ü‡ßá‡¶¨‡¶ø‡¶≤** ‡¶π‡¶ø‡¶∏‡ßá‡¶¨‡ßá behave ‡¶ï‡¶∞‡¶æ‡ßü‡•§

---

# üéØ **Example:**

‡¶Ü‡¶™‡¶®‡¶ø ‡¶≤‡¶ø‡¶ñ‡¶≤‡ßá‡¶®:

```sql
SELECT * FROM users WHERE created_at = '2025-01-17'
```

PostgreSQL internally ‡¶¨‡ßÅ‡¶ù‡¶¨‡ßá:

üëâ ‚ÄúJanuary date ‚Üí ‡¶§‡¶æ‡¶π‡¶≤‡ßá users_2025_01 partition-‡¶è ‡¶Ü‡¶õ‡ßá‚Äù

‡¶§‡¶æ‡¶∞‡¶™‡¶∞:

‚úî ‡¶∂‡ßÅ‡¶ß‡ßÅ `users_2025_01` ‡¶ü‡ßá‡¶¨‡¶ø‡¶≤ scan ‡¶ï‡¶∞‡¶¨‡ßá
‚ùå ‡¶™‡ßÅ‡¶∞‡ßã users table scan ‡¶ï‡¶∞‡¶¨‡ßá ‡¶®‡¶æ
‚ùå ‡¶Ö‡¶®‡ßç‡¶Ø partition touch ‡¶ï‡¶∞‡¶¨‡ßá ‡¶®‡¶æ

‡¶è‡¶ü‡¶æ‡¶á partition-‡¶è‡¶∞ ‡¶∏‡¶¨‡¶ö‡ßá‡ßü‡ßá ‡¶¨‡ßú advantage!

---

# üöÄ Partitioning ‡¶ï‡¶∞‡¶≤‡ßá ‡¶ï‡ßÄ ‡¶ï‡ßÄ ‡¶Ü‡¶≤‡¶æ‡¶¶‡¶æ ‡¶ü‡ßá‡¶¨‡¶ø‡¶≤ ‡¶π‡ßü?

### 1Ô∏è‚É£ Master Table ‚Üí Parent

```
users
```

### 2Ô∏è‚É£ Partition Tables ‚Üí Child

```
users_2025_01
users_2025_02
users_2025_03
users_2025_04
```

‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶ü‡¶ø partition ‡¶ü‡ßá‡¶¨‡¶ø‡¶≤:

‚úî ‡¶Ü‡¶≤‡¶æ‡¶¶‡¶æ table
‚úî ‡¶Ü‡¶≤‡¶æ‡¶¶‡¶æ index
‚úî ‡¶Ü‡¶≤‡¶æ‡¶¶‡¶æ storage
‚úî ‡¶Ü‡¶≤‡¶æ‡¶¶‡¶æ vacuum / analyze
‚úî ‡¶Ü‡¶≤‡¶æ‡¶¶‡¶æ drop ‡¶ï‡¶∞‡¶æ ‡¶Ø‡¶æ‡ßü (delete-‡¶è‡¶∞ ‡¶ö‡ßá‡ßü‡ßá 100√ó faster)

---

# üß† Partition ‡¶ï‡¶ø‡¶≠‡¶æ‡¶¨‡ßá ‡¶ï‡¶æ‡¶ú ‡¶ï‡¶∞‡ßá?

### Master Table ‡¶∂‡ßÅ‡¶ß‡ßÅ Structure ‡¶∞‡¶æ‡¶ñ‡ßá

Data ‡¶•‡¶æ‡¶ï‡ßá **partition** ‡¶ü‡ßá‡¶¨‡¶ø‡¶≤‡¶ó‡ßÅ‡¶≤‡ßã‡¶∞ ‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá‡•§

### Example:

```
INSERT INTO users (user_id, created_at)
VALUES (1001, '2025-01-12');
```

PostgreSQL automatically sends data to:

```
users_2025_01
```

---

# üëç Partitioning gives:

### ‚úî Much faster SELECT

### ‚úî Much faster INSERT

### ‚úî No full table scan

### ‚úî 100√ó faster delete (DROP PARTITION)

### ‚úî Storage optimized

### ‚úî Perfect for big data (logs, quiz users, attendance)

---

# üéØ Small Summary

| Question                          | Answer                                  |
| --------------------------------- | --------------------------------------- |
| Partition ‡¶ï‡¶∞‡¶≤‡ßá ‡¶ï‡¶ø ‡¶Ü‡¶≤‡¶æ‡¶¶‡¶æ table ‡¶π‡ßü? | ‚úî ‡¶π‡ßç‡¶Ø‡¶æ‡¶Å                                 |
| Partition table ‡¶¶‡ßá‡¶ñ‡¶§‡ßá ‡¶ï‡ßá‡¶Æ‡¶®?       | users_2025_01, users_2025_02            |
| Main table ‡¶ï‡¶ø ‡¶•‡¶æ‡¶ï‡ßá?               | ‚úî users (parent)                        |
| Data ‡¶ï‡ßã‡¶•‡¶æ‡ßü ‡¶Ø‡¶æ‡ßü?                   | ‚úî Partition table                       |
| Query ‡¶ï‡¶ø‡¶≠‡¶æ‡¶¨‡ßá ‡¶ï‡¶æ‡¶ú ‡¶ï‡¶∞‡ßá?             | PostgreSQL correct partition choose ‡¶ï‡¶∞‡ßá |

---

# üëâ Want to SEE actual tables inside PostgreSQL?

I can show:

```
\d users
```

Output:

* Partitioned table
* Attached partitions
* Index per partition

```
  package snvnUserService.icsQuizUserService.config.databaseFolder;

import org.springframework.r2dbc.core.DatabaseClient;
import org.springframework.stereotype.Component;
import reactor.core.publisher.Mono;

import java.time.LocalDate;

@Component
public class UsersTableInitializer {

    private final DatabaseClient databaseClient;

    public UsersTableInitializer(DatabaseClient databaseClient) {
        this.databaseClient = databaseClient;
    }

    public Mono<Void> initialize() {
        LocalDate now = LocalDate.now();
        LocalDate start = now.withDayOfMonth(1);
        LocalDate end = start.plusMonths(1);

        return createMasterTable()
                .then(createPartition(start, end))
                .then(createIndexes(start));
    }

    // Master table (partitioned)
    private Mono<Void> createMasterTable() {
        String sql = """
            CREATE TABLE IF NOT EXISTS users (
                id SERIAL PRIMARY KEY,
                user_id BIGINT,
                name VARCHAR(100) NOT NULL,
                code_number VARCHAR(50) NOT NULL,
                password VARCHAR(255) NOT NULL,
                created_at DATE NOT NULL DEFAULT CURRENT_DATE,
                updated_at TIMESTAMP
            ) PARTITION BY RANGE (created_at);
        """;
        return databaseClient.sql(sql).then();
    }

    // Partition for current month
    private Mono<Void> createPartition(LocalDate start, LocalDate end) {
        String tableName = "users_" + start.getYear() + "_" + String.format("%02d", start.getMonthValue());

        String sql = """
            CREATE TABLE IF NOT EXISTS %s PARTITION OF users
            FOR VALUES FROM ('%s') TO ('%s');
        """.formatted(tableName, start, end);

        return databaseClient.sql(sql).then();
    }

    // Indexes for the partition
    private Mono<Void> createIndexes(LocalDate start) {
        String tableName = "users_" + start.getYear() + "_" + String.format("%02d", start.getMonthValue());

        String sql = """
            CREATE INDEX IF NOT EXISTS idx_%s_user_id ON %s(user_id);
            CREATE INDEX IF NOT EXISTS idx_%s_code_number ON %s(code_number);
            CREATE INDEX IF NOT EXISTS idx_%s_created_at ON %s(created_at);
        """.formatted(tableName, tableName, tableName, tableName, tableName, tableName);

        return databaseClient.sql(sql).then();
    }
}

```



Just say: **‚Äúshow PostgreSQL table output example‚Äù** or
**‚Äúsee partition structure‚Äù**
